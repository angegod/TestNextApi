(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[683],{255:(e,t,s)=>{"use strict";function a(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return a}}),s(5155),s(7650),s(5744),s(589)},2146:(e,t,s)=>{"use strict";function a(e){let{reason:t,children:s}=e;return s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),s(5262)},3471:(e,t,s)=>{"use strict";s.d(t,{default:()=>w});var a=s(5155),l=s(9550),r=s(2540),n=s(2115),i=s(5695);s(9193),s(4125);var x=s(7665),c=s(7901),d=s(8390),o=s(1582),m=s(8637),f=s(3848);let u=function(){return(0,a.jsxs)("div",{className:"flex flex-col max-w-[230px] ",children:[(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-white font-bold text-md",children:"使用方法"})}),(0,a.jsxs)("div",{className:"[&>span]:text-stone-400 flex flex-col",children:[(0,a.jsx)("span",{children:"根據遺器現有狀況"}),(0,a.jsx)("span",{children:"依序輸入詞條種類、詞條數值、強化次數"}),(0,a.jsx)("span",{className:"!text-yellow-500",children:"詞條數值不用輸入%"}),(0,a.jsx)("span",{className:"!text-yellow-500",children:"如果該詞條沒有被強化過，則強化次數打上0即可"})]}),(0,a.jsxs)("div",{className:"mt-2 [&>span]:text-stone-400 flex flex-col",children:[(0,a.jsx)("span",{children:"例如:今天有一個詞條為"}),(0,a.jsx)("span",{className:"!text-green-500",children:"暴擊傷害 13.4% 2"}),(0,a.jsx)("span",{children:"那麼只要key上"}),(0,a.jsx)("span",{className:"!text-green-500",children:"暴擊傷害 13.4 2"})]}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col",children:[(0,a.jsx)("span",{className:"text-white font-bold text-md",children:"注意事項:"}),(0,a.jsx)("span",{className:"text-red-500",children:"1.副詞條彼此間不能重複"}),(0,a.jsx)("span",{className:"text-red-500",children:"2.主詞條跟副詞條不可重複"})]})]})},h=function(){return(0,a.jsxs)("div",{className:"w-[300px] flex flex-col max-[600px]:my-3",children:[(0,a.jsx)("h2",{className:"text-red-600 font-bold text-lg",children:"使用說明"}),(0,a.jsxs)("ul",{className:"[&>li]:text-white list-decimal [&>li]:ml-2 max-[400px]:[&>li]:text-sm",children:[(0,a.jsx)("li",{children:"此工具主要目的是給予一些想要重洗詞條的人參考"}),(0,a.jsx)("li",{children:"翻盤機率是指說該遺器透過重洗詞條道具後導致遺器分數變高的機率為何"}),(0,a.jsx)("li",{children:"目前遺器只支援計算五星遺器"}),(0,a.jsx)("li",{children:"此工具相關數據仍有更改的可能，敬請見諒!"}),(0,a.jsxs)("li",{children:["操作說明可以參考",(0,a.jsx)("a",{href:"https://home.gamer.com.tw/artwork.php?sn=6065608",className:"!underline",children:"這篇"})]})]})]})};var p=s(5424),j=s(9779),v=s(4422);let w=function(){let[e,t]=(0,n.useState)(void 0),[w,b]=(0,n.useState)(),[N,g]=(0,n.useState)(void 0),[y,S]=(0,n.useState)(void 0),[_,I]=(0,n.useState)({color:void 0,rank:void 0}),[O,D]=(0,n.useState)(void 0),[P,k]=(0,n.useState)(!0),A=(0,n.useRef)([]),H=(0,n.useRef)([]),[M,E]=(0,n.useState)(void 0),[R,C]=(0,n.useState)(void 0),[B,T]=(0,n.useState)([]),[L,J]=(0,n.useState)({}),{showStatus:F,updateStatus:X,hideStatus:q}=(0,v.Z)(),[$,W]=(0,n.useState)(),[z,Q]=(0,n.useState)([]),U=["Head 頭部","Hand 手部","Body 軀幹","Feet 腳部","Ball 位面球","Rope 連結繩"],[V,G]=(0,n.useState)(!1),[Z,K]=(0,n.useState)(!0),Y=(0,i.usePathname)();(0,n.useEffect)(()=>{H.current=[];for(var e=0;e<=3;e++){let t={index:e,subaffix:0,data:0,count:0};H.current.push(t)}let t=JSON.parse(localStorage.getItem("HistoryData"));t&&(F("正在載入過往紀錄中......"),null!=t&&t.length>0?(t=t.filter(e=>"1.3"===e.version),localStorage.setItem("HistoryData",JSON.stringify(t)),Q(t),X("先前紀錄已匯入!!","success")):X("尚未有任何操作紀錄!!","default"))},[Y]),(0,n.useEffect)(()=>{void 0!==e&&Number.isInteger(e)&&b(l.A.find(t=>t.id===parseInt(e)).main[0])},[e]);let ee={charID:M,standDetails:A.current,partArr:U,historyData:z,isChangeAble:Z,selfStand:B,partsIndex:e,MainSelectOptions:w,SubData:H,simulatorData:L,Rrank:_,Rscore:y,relic:$,updateHistory:function(e){let t=z.filter((t,s)=>s!==e);Q(t),F("正在處理中......"),setTimeout(()=>{X("成功刪除該紀錄!!","success")},0),localStorage.setItem("HistoryData",JSON.stringify(t))},checkDetails:function(e){let t=z[e];I(t.rank),g(t.expRate),S(t.score),X("資料替換完畢!!","success"),C(t.pieData),A.current=t.stand,W(t.relic),J({}),requestAnimationFrame(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})},simulate:function(){let e=!0,t=new Worker(s.tu(new URL(s.p+s.u(682),s.b))),a=x.A.find(e=>e.name===$.main_affix),l=[];$.subaffix.forEach((e,t)=>{let s={index:t,subaffix:x.A.find(t=>t.name===e.subaffix).name,data:e.data,count:e.count};l.push(s)}),B.forEach(t=>{""===t.value&&(e=!1,X("加權指數不可為空或其他非法型式","error"))});let r={MainData:a.name,SubData:l,partsIndex:$.type,standard:A.current,deviation:.5};e&&(t.postMessage(r),t.onmessage=function(e){J({oldData:{relicscore:y,relicrank:_,returnData:l},newData:e.data}),requestAnimationFrame(()=>{window.scrollTo({top:document.getElementById("enchant").offsetTop,behavior:"smooth"})})}),K(!0)},setCharID:E,setIsChangeAble:K,setIsSaveAble:G,setSelfStand:T,setPartsIndex:t,setMainSelectOptions:b,setStatusMsg:D};return(0,a.jsxs)(j.A.Provider,{value:ee,children:[(0,a.jsxs)("div",{className:"w-4/5 mx-auto max-[600px]:w-[90%] flex flex-row flex-wrap",children:[(0,a.jsxs)("div",{className:"flex flex-col  bg-[rgba(0,0,0,0.5)] p-2 rounded-md max-[1200px]:w-full",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)("h1",{className:"text-red-600 font-bold text-2xl",children:"遺器重洗模擬器"}),(0,a.jsx)("div",{className:"hintIcon ml-2 overflow-visible","data-tooltip-id":"SimulatorHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]}),(0,a.jsx)("div",{className:"flex flex-row flex-wrap",children:(0,a.jsx)("div",{className:"flex flex-row flex-wrap w-1/2 max-[1200px]:w-[100%]",children:(0,a.jsxs)("div",{className:"flex flex-col mt-2",children:[(0,a.jsxs)("div",{className:"flex flex-row [&>*]:mr-2 my-3 items-center max-[400px]:!flex-col max-[400px]:items-start",children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[120px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-white",children:"Characters 腳色:"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(f.zj,{}),(0,a.jsx)("div",{className:"hintIcon ml-1 overflow-visible","data-tooltip-id":"CharHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"my-1 mt-2 [&>*]:mr-2 flex flex-row max-[400px]:!flex-col max-[400px]:items-start",children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[120px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-white",children:"Parts 部位:"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(f.q2,{}),(0,a.jsx)("div",{className:"hintIcon ml-1 overflow-visible","data-tooltip-id":"PartSelectHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"my-1 ".concat(Number.isInteger(parseInt(e))?"":"hidden"," mt-2 [&>*]:mr-2 flex flex-row max-[400px]:items-start max-[400px]:!flex-col"),children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[120px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-white",children:"Main 主屬性:"})}),(0,a.jsx)("div",{className:"flex flex-row items-center",children:(0,a.jsx)(f.Q2,{})})]}),(0,a.jsxs)("div",{className:"my-1 ".concat(void 0!==w&&"undefined"!==w&&void 0!==e?"":"hidden"," mt-2 [&>*]:mr-2 flex flex-row max-[600px]:!flex-col max-[600px]:text-center max-[400px]:text-left"),children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:w-[100%] max-[600px]:text-center max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-white",children:"SubAffix 副屬性:"})}),(0,a.jsxs)("div",{className:"flex flex-row items-start justify-center",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(f.$X,{index:0}),(0,a.jsx)(f.$X,{index:1}),(0,a.jsx)(f.$X,{index:2}),(0,a.jsx)(f.$X,{index:3})]}),(0,a.jsx)("div",{className:"hintIcon ml-1 mt-1 overflow-visible","data-tooltip-id":"SubAffixHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"mt-4 [&>*]:mr-2 flex flex-row items-baseline max-[400px]:!flex-col ".concat(void 0===e?"hidden":""),children:[(0,a.jsx)("div",{className:"text-right w-[200px]  max-[400px]:text-left max-[600px]:w-[120px]",children:(0,a.jsx)("span",{className:"text-white",children:"Affix 有效詞條:"})}),(0,a.jsx)("div",{className:"flex flex-row items-center",children:(0,a.jsx)(f.mM,{})})]}),(0,a.jsxs)("div",{className:"mt-2 [&>*]:mr-2 flex flex-row max-[400px]:!flex-col ".concat(0===B.length?"hidden":""),children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[120px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-white",children:"Params 參數:"})}),(0,a.jsx)(d.Q,{})]}),(0,a.jsx)("div",{className:"".concat(Number.isInteger(parseInt(e))?"":"hidden"," mt-2 mb-2 max-w-[400px] flex flex-row [&>*]:mr-2 justify-end max-[400px]:justify-start"),children:(0,a.jsxs)("div",{className:"flex flex-row mt-1",children:[(0,a.jsx)("button",{className:"processBtn mr-2 whitespace-nowrap",onClick:()=>(function(){let t=!1;if(console.log(H.current),H.current.some((e,s)=>e.subaffix===w?(X("第".concat(s+1,"個詞條:副詞條不可選擇與主詞條相同的詞條\n請再重新選擇!!"),"error"),t=!0,!0):"undefined"===e.subaffix||0===e.subaffix?(X("您還有副詞條沒有選擇\n請再重新選擇!!","error"),t=!0,!0):void 0),t)return;let a=new Set;for(let e of H.current){if(a.has(e.subaffix)){alert("副詞條之間不可以選擇重複\n請再重新選擇!!"),t=!0;return}a.add(e.subaffix)}if(B.forEach(e=>{""===e.value&&(t=!0,alert("加權指數不可為空或其他非法型式"))}),t)return;let l=H.current.includes(e=>"spd"===e.subaffix)?.5*B.find(e=>"速度"===e.name).value:0;H.current.forEach(e=>{"spd"!==e.subaffix&&0!==e.count&&(l+=.2)});let r=new Worker(s.tu(new URL(s.p+s.u(444),s.b))),n={charID:M,MainData:w,SubData:H.current,partsIndex:e,standard:B,deviation:l};G(!1),k(!1),K(!1),F("數據計算處理中!!"),g(void 0),I({color:void 0,rank:void 0}),C(void 0),S(void 0),W(void 0),r.postMessage(n),r.onmessage=function(t){let s;g(t.data.expRate),S(t.data.relicscore),X("計算完畢!!","success"),C(t.data.returnData),I(t.data.relicrank),s={main_affix:w,subaffix:[]},H.current.forEach((e,t)=>{["生命值","攻擊力","防禦力","速度"].includes(e.subaffix)?e.display=e.data:e.display=e.data+"%"}),s.subaffix=H.current,s.type=parseInt(e),W(s),A.current=B,k(!0),G(!0),K(!0),requestAnimationFrame(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}),J({})}})(),disabled:!P,children:"計算分數"}),(0,a.jsx)("button",{className:"processBtn mr-2 whitespace-nowrap",onClick:()=>(function(){let t=U[e-1],s=r.A.find(e=>e.charID===M);if(z?z.length>=6&&Q(z.filter((e,t)=>0!==t)):Q([]),!R||void 0===N||!_||void 0===y)return void X("當前沒有任何數據，不予儲存!!","error");if(!M)return void X("沒有選擇任何腳色!!","error");$.type=parseInt(e);let a={version:"1.3",char:s,part:t,mainaffix:w,expRate:N,score:y,rank:_,pieData:R,stand:A.current,relic:$},l=JSON.parse(JSON.stringify(z));Q(e=>[...e,a]),X("已儲存","success"),document.getElementById("historyData").scrollIntoView({behavior:"smooth"}),l.push(a),localStorage.setItem("HistoryData",JSON.stringify(l)),G(!1)})(),disabled:!V,children:"儲存紀錄"})]})})]})})})]}),(0,a.jsxs)("div",{className:"w-1/2 ml-2 bg-[rgba(0,0,0,0.5)] rounded-md p-2 h-fit max-[1200px]:w-[100%] max-[1200px]:ml-0 max-[1200px]:mt-2",id:"historyData",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)("span",{className:"text-red-600 text-lg font-bold",children:"過往紀錄"}),(0,a.jsx)("div",{className:"hintIcon ml-2 overflow-visible","data-tooltip-id":"HistoryHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]}),(0,a.jsx)("div",{className:"flex flex-row flex-wrap h-max max-h-[600px] overflow-y-scroll hiddenScrollBar max-[600px]:!flex-col max-[600px]:!flex-nowrap",children:(0,a.jsx)(m.a,{})})]}),(0,a.jsx)("div",{className:"flex flex-row my-3 flex-wrap shadowBox bg-[rgba(0,0,0,0.5)] w-full p-2 ".concat(void 0===R?"hidden":""," rounded-md"),children:(0,a.jsxs)("div",{className:"w-full flex flex-row flex-wrap ".concat(void 0===R?"hidden":""),children:[(0,a.jsx)("div",{className:"flex flex-row flex-wrap w-[18vw]  max-[700px]:w-[50%] ".concat(void 0===R?"hidden":""," max-[500px]:w-4/5 max-[500px]:mx-auto"),children:(0,a.jsx)(o.v,{mode:"Simulator",button:!0})}),(0,a.jsx)("div",{className:"w-1/4 max-[700px]:w-[50%] ".concat(void 0===R?"hidden":""," max-[500px]:w-4/5 max-[500px]:mx-auto"),children:(0,a.jsx)(d.V,{})}),(0,a.jsx)("div",{className:"flex flex-row flex-wrap w-1/2 max-[700px]:w-[100%] max-[500px]:w-4/5 max-[500px]:mx-auto ",id:"resultDetails",children:(0,a.jsx)(c.A,{ExpRate:N,Rscore:y,statusMsg:O,Rrank:_,PieNums:R})})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(p.m_,{id:"CharHint",place:"right-start",render:()=>(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-white",children:"選擇指定腳色，可以使用中文或英文關鍵字"}),(0,a.jsx)("span",{className:"text-white",children:"例如:Jingliu→鏡流"})]})}),(0,a.jsx)(p.m_,{id:"PartSelectHint",place:"right-start",render:()=>(0,a.jsxs)("div",{className:"flex flex-col max-w-[230px]",children:[(0,a.jsx)("span",{className:"text-white",children:"選擇遺器部位"}),(0,a.jsx)("span",{className:"text-white",children:'"主詞條"跟"副詞條"區塊中會自動帶入該部位詞條種類'})]})}),(0,a.jsx)(p.m_,{id:"SubAffixHint",place:"right-start",render:()=>(0,a.jsx)(u,{})}),(0,a.jsx)(p.m_,{id:"HistoryHint",place:"top-center",render:()=>(0,a.jsxs)("div",{className:"flex flex-col max-w-[250px] p-1",children:[(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-white",children:"此區塊可以查看過往查詢紀錄，下面為個別功能相關簡述。"})}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col",children:[(0,a.jsx)("span",{className:"text-md font-bold text-white",children:"檢視"}),(0,a.jsx)("span",{children:"可以查看曾經查詢出來的資訊、包括遺器、評分標準等"})]}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col",children:[(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-md font-bold text-white",children:"刪除"})}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{children:"刪除該筆紀錄"})})]}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col",children:[(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-md font-bold text-white",children:"注意事項"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"!text-red-500",children:'"過往紀錄"最多只保留6筆'}),(0,a.jsx)("span",{className:"!text-yellow-500",children:"如果在已有6筆資料的情況再新增，則會從最舊的紀錄開始覆蓋掉"})]})]})]})}),(0,a.jsx)(p.m_,{id:"SimulatorHint",place:"right-start",render:()=>(0,a.jsx)(h,{}),clickable:!0})]})]})}},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{bindSnapshot:function(){return n},createAsyncLocalStorage:function(){return r},createSnapshot:function(){return i}});let s=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw s}getStore(){}run(){throw s}exit(){throw s}enterWith(){throw s}static bind(e){return e}}let l="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function r(){return l?new l:new a}function n(e){return l?l.bind(e):a.bind(e)}function i(){return l?l.snapshot():function(e,...t){return e(...t)}}},4125:()=>{},5028:(e,t,s)=>{"use strict";s.d(t,{default:()=>l.a});var a=s(6645),l=s.n(a)},5744:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=s(7828)},6645:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let a=s(8229)._(s(7357));function l(e,t){var s;let l={};"function"==typeof e&&(l.loader=e);let r={...l,...t};return(0,a.default)({...r,modules:null==(s=r.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7357:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return x}});let a=s(5155),l=s(2115),r=s(2146);function n(e){return{default:e&&"default"in e?e.default:e}}s(255);let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},x=function(e){let t={...i,...e},s=(0,l.lazy)(()=>t.loader().then(n)),x=t.loading;function c(e){let n=x?(0,a.jsx)(x,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?l.Suspense:l.Fragment,d=t.ssr?(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(c,{...i?{fallback:n}:{},children:d})}return c.displayName="LoadableComponent",c}},7828:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,s(4054).createAsyncLocalStorage)()},9862:(e,t,s)=>{Promise.resolve().then(s.bind(s,3471))}},e=>{var t=t=>e(e.s=t);e.O(0,[8,60,935,212,994,874,337,571,441,684,358],()=>t(9862)),_N_E=e.O()}]);