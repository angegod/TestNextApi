(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[683],{322:(e,t,s)=>{Promise.resolve().then(s.bind(s,6167))},6167:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(5155),l=s(9550),i=s(2540),r=s(2115),x=s(5695);s(9193);var n=s(7665),c=s(7901),d=s(8390),o=s(2887),m=s(9796),h=s(3848),f=s(5424);let p=(0,r.createContext)(),u=e=>{let{context:t}=e,{historyData:s}=(0,r.useContext)(t);return s?s.map((e,s)=>(0,a.jsx)(m.O,{index:s,data:e,context:t},"historyData"+s)):(0,a.jsx)(a.Fragment,{})},j=function(){let[e,t]=(0,r.useState)(void 0),[s,m]=(0,r.useState)(),[j,w]=(0,r.useState)(void 0),[v,N]=(0,r.useState)(void 0),[b,g]=(0,r.useState)({color:void 0,rank:void 0}),[S,y]=(0,r.useState)(void 0),[I,D]=(0,r.useState)(!0),H=(0,r.useRef)([]),k=(0,r.useRef)([]),[A,_]=(0,r.useState)(void 0),[E,R]=(0,r.useState)(void 0),[C,M]=(0,r.useState)([]),[O,P]=(0,r.useState)({}),[B,J]=(0,r.useState)(),F=(0,r.useRef)([]),T=["Head 頭部","Hand 手部","Body 軀幹","Feet 腳部","Ball 位面球","Rope 連結繩"],[q,X]=(0,r.useState)(!1),[$,Q]=(0,r.useState)(!0),V=(0,x.usePathname)();(0,r.useEffect)(()=>{k.current=[];for(var e=0;e<=3;e++){let t={index:e,subaffix:0,data:0,count:0};k.current.push(t)}let t=JSON.parse(localStorage.getItem("HistoryData"));null!=t&&t.length>0&&(t=t.filter(e=>"1.3"===e.version),localStorage.setItem("HistoryData",JSON.stringify(t)),F.current=t,y("先前紀錄已匯入!!"))},[V]),(0,r.useEffect)(()=>{void 0!==e&&Number.isInteger(e)&&m(l.A.find(t=>t.id===parseInt(e)).main[0])},[e]);let W={charID:A,standDetails:H.current,partArr:T,historyData:F.current,isChangeAble:$,selfStand:C,partsIndex:e,MainSelectOptions:s,SubData:k,simulatorData:O,Rrank:b,Rscore:v,relic:B,updateHistory:function(e){F.current=F.current.filter((t,s)=>s!==e),y("正在處理中....."),setTimeout(()=>{y("成功刪除該紀錄!!")},0),localStorage.setItem("HistoryData",JSON.stringify(F.current))},checkDetails:function(e){let t=F.current[e];g(t.rank),w(t.expRate),N(t.score),y("資料替換完畢!!"),R(t.pieData),H.current=t.stand,J(t.relic),P({}),requestAnimationFrame(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})},simulate:function(){let e=!0,t=new Worker("../worker/worker.js"),s=n.A.find(e=>e.name===B.main_affix),a=[];B.subaffix.forEach((e,t)=>{let s={index:t,subaffix:n.A.find(t=>t.name===e.subaffix).name,data:e.data,count:e.count};a.push(s)}),C.forEach(t=>{""===t.value&&(e=!1,y("加權指數不可為空或其他非法型式"))});let l={MainData:s.name,SubData:a,partsIndex:B.type,standard:H.current,deviation:.5};e&&(t.postMessage(l),t.onmessage=function(e){P({oldData:{relicscore:v,relicrank:b,returnData:a},newData:e.data}),requestAnimationFrame(()=>{window.scrollTo({top:document.getElementById("enchant").offsetTop,behavior:"smooth"})})}),Q(!0)},setCharID:_,setIsChangeAble:Q,setIsSaveAble:X,setSelfStand:M,setPartsIndex:t,setMainSelectOptions:m,setStatusMsg:y};return(0,a.jsxs)(p.Provider,{value:W,children:[(0,a.jsxs)("div",{className:"w-4/5 mx-auto max-[600px]:w-[90%]",children:[(0,a.jsx)("h1",{className:"text-red-500 font-bold text-2xl",children:"遺器重洗模擬器"}),(0,a.jsxs)("div",{className:"flex flex-row flex-wrap",children:[(0,a.jsxs)("div",{className:"flex flex-col mt-2 w-3/5 max-[900px]:w-[100%]",children:[(0,a.jsxs)("div",{className:"flex flex-row [&>*]:mr-2 my-3 items-center max-[400px]:!flex-col max-[400px]:items-start",children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[150px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-white",children:"Characters 腳色:"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(h.zj,{context:p}),(0,a.jsx)("div",{className:"hintIcon ml-1 overflow-visible","data-tooltip-id":"CharHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"my-1 ".concat(Number.isInteger(A)&&void 0!==A?"":"hidden"," mt-2 [&>*]:mr-2 flex flex-row max-[400px]:!flex-col max-[400px]:items-start"),children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[150px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-white",children:"Parts 部位:"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(h.q2,{context:p}),(0,a.jsx)("div",{className:"hintIcon ml-1 overflow-visible","data-tooltip-id":"PartSelectHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"my-1 ".concat(Number.isInteger(parseInt(e))?"":"hidden"," mt-2 [&>*]:mr-2 flex flex-row max-[400px]:items-start max-[400px]:!flex-col"),children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[150px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-white",children:"MainAffix 主屬性:"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(h.Q2,{context:p}),(0,a.jsx)("div",{className:"hintIcon ml-1 overflow-visible ".concat(1!==parseInt(e)&&2!==parseInt(e)?"":"hidden"),"data-tooltip-id":"MainAffixHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"my-1 ".concat(void 0!==s&&"undefined"!==s&&void 0!==e?"":"hidden"," \n                            mt-2 [&>*]:mr-2 flex flex-row max-[600px]:!flex-col max-[600px]:text-center max-[400px]:text-left"),children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:w-[100%] max-[600px]:text-center max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-white",children:"SubAffix 副屬性:"})}),(0,a.jsxs)("div",{className:"flex flex-row items-start",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(h.$X,{index:0,context:p}),(0,a.jsx)(h.$X,{index:1,context:p}),(0,a.jsx)(h.$X,{index:2,context:p}),(0,a.jsx)(h.$X,{index:3,context:p})]}),(0,a.jsx)("div",{className:"hintIcon ml-1 mt-1 overflow-visible","data-tooltip-id":"SubAffixHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"mt-4 [&>*]:mr-2 flex flex-row items-baseline max-[400px]:!flex-col ".concat(void 0===e?"hidden":""),children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[150px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-white",children:"Affix 有效詞條:"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(h.mM,{context:p}),(0,a.jsx)("div",{className:"hintIcon ml-1 overflow-visible","data-tooltip-id":"StandardHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"mt-2 [&>*]:mr-2 flex flex-row max-[400px]:!flex-col ".concat(0===C.length?"hidden":""),children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[150px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-white",children:"Params 參數:"})}),(0,a.jsx)(d.Q,{context:p})]}),(0,a.jsx)("div",{className:"".concat(Number.isInteger(parseInt(e))?"":"hidden"," mt-2 mb-2 max-w-[400px] flex flex-row [&>*]:mr-2 justify-end max-[400px]:justify-start"),children:(0,a.jsxs)("div",{className:"flex flex-row mt-1",children:[(0,a.jsx)("button",{className:"processBtn mr-2 whitespace-nowrap",onClick:()=>(function(){let t=!1;if(console.log(k.current),k.current.some((e,a)=>e.subaffix===s?(alert("第".concat(a+1,"個詞條選擇\n副詞條不可選擇與主詞條相同的詞條\n請再重新選擇!!")),t=!0,!0):"undefined"===e.subaffix||0===e.subaffix?(alert("您還有副詞條沒有選擇\n請再重新選擇!!"),t=!0,!0):void 0),t)return;let a=new Set;for(let e of k.current){if(a.has(e.subaffix)){alert("副詞條之間不可以選擇重複\n請再重新選擇!!"),t=!0;return}a.add(e.subaffix)}if(C.forEach(e=>{""===e.value&&(t=!0,alert("加權指數不可為空或其他非法型式"))}),t)return;let l=k.current.includes(e=>"spd"===e.subaffix)?.5*C.find(e=>"速度"===e.name).value:0;k.current.forEach(e=>{"spd"!==e.subaffix&&0!==e.count&&(l+=.2)});let i=new Worker("/worker/worker.js"),r={charID:A,MainData:s,SubData:k.current,partsIndex:e,standard:C,deviation:l};X(!1),D(!1),Q(!1),y("數據計算處理中!!"),w(void 0),g({color:void 0,rank:void 0}),R(void 0),N(void 0),J(void 0),i.postMessage(r),i.onmessage=function(t){let a;w(t.data.expRate),N(t.data.relicscore),y("計算完畢!!"),R(t.data.returnData),g(t.data.relicrank),a={main_affix:s,subaffix:[]},k.current.forEach((e,t)=>{["生命值","攻擊力","防禦力","速度"].includes(e.subaffix)?e.display=e.data:e.display=e.data+"%"}),a.subaffix=k.current,a.type=parseInt(e),J(a),H.current=C,D(!0),X(!0),Q(!0),requestAnimationFrame(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}),P({})}})(),disabled:!I,children:"計算分數"}),(0,a.jsx)("button",{className:"processBtn mr-2 whitespace-nowrap",onClick:()=>(function(){let t=T[e-1],a=i.A.find(e=>e.charID===A);if(F.current?F.current.length>=6&&(F.current=F.current.filter((e,t)=>0!==t)):F.current=[],!E||void 0===j||!b||void 0===v)return void y("當前沒有任何數據，不予儲存!!");if(!A)return void y("沒有選擇任何腳色!!");B.type=parseInt(e);let l={version:"1.3",char:a,part:t,mainaffix:s,expRate:j,score:v,rank:b,pieData:E,stand:H.current,relic:B},r=JSON.parse(JSON.stringify(F.current));F.current.push(l),y("已儲存"),document.getElementById("historyData").scrollIntoView({behavior:"smooth"}),r.push(l),localStorage.setItem("HistoryData",JSON.stringify(r)),X(!1)})(),disabled:!q,children:"儲存紀錄"})]})})]}),(0,a.jsxs)("div",{className:"w-2/5 max-w-[400px] flex flex-col max-[900px]:w-[100%] max-[600px]:my-3",children:[(0,a.jsx)("h2",{className:"text-red-600 font-bold text-lg",children:"使用說明"}),(0,a.jsxs)("ul",{className:"[&>li]:text-white list-decimal [&>li]:ml-2 max-[400px]:[&>li]:text-sm",children:[(0,a.jsx)("li",{children:"此工具主要目的是給予一些想要重洗詞條的人參考"}),(0,a.jsx)("li",{children:"翻盤機率是指說該遺器透過重洗詞條道具後導致遺器分數變高的機率為何"}),(0,a.jsx)("li",{children:"目前遺器只支援計算五星遺器"}),(0,a.jsx)("li",{children:"此工具相關數據仍有更改的可能，敬請見諒!"}),(0,a.jsxs)("li",{children:["操作說明可以參考",(0,a.jsx)("a",{href:"https://home.gamer.com.tw/artwork.php?sn=6065608",className:"!underline",children:"這篇"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-row mb-3 flex-wrap",children:[(0,a.jsxs)("div",{className:"w-[100%] max-[930px]:w-[100%] border-t-4 border-gray-600 p-2 my-4 ".concat(F.current&&0!==F.current.length?"":"hidden"),id:"historyData",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)("span",{className:"text-red-500 text-lg font-bold",children:"過往紀錄"}),(0,a.jsx)("div",{className:"hintIcon ml-2 overflow-visible","data-tooltip-id":"HistoryHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]}),(0,a.jsx)("div",{className:"flex flex-row flex-wrap h-[300px] overflow-y-scroll hiddenScrollBar max-[600px]:!flex-col max-[600px]:!flex-nowrap",children:(0,a.jsx)(u,{context:p})})]}),(0,a.jsxs)("div",{className:"border-t-4 border-gray-600 w-[100%] flex flex-row",children:[(0,a.jsx)("div",{className:"mt-3 flex flex-row flex-wrap w-[18vw]  max-[700px]:w-[50%] ".concat(void 0===E?"hidden":""," max-[400px]:w-[100%]"),children:(0,a.jsx)(o.d,{context:p,mode:"Simulator",button:!0})}),(0,a.jsx)("div",{className:"mt-3 w-1/4 max-[700px]:w-[50%] ".concat(void 0===E?"hidden":""," max-[400px]:w-[100%]"),children:(0,a.jsx)(d.V,{context:p})}),(0,a.jsx)("div",{className:"mt-3 flex flex-row flex-wrap w-1/2 max-[700px]:w-[100%]",id:"resultDetails",children:(0,a.jsx)(c.A,{ExpRate:j,Rscore:v,statusMsg:S,Rrank:b,PieNums:E})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f.m_,{id:"CharHint",place:"right-start",render:()=>(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-white",children:"選擇指定腳色，可以使用中文或英文關鍵字"}),(0,a.jsx)("span",{className:"text-white",children:"例如:Jingliu→鏡流"})]})}),(0,a.jsx)(f.m_,{id:"PartSelectHint",place:"right-start",render:()=>(0,a.jsxs)("div",{className:"flex flex-col max-w-[230px]",children:[(0,a.jsx)("span",{className:"text-white",children:"選擇遺器部位"}),(0,a.jsx)("span",{className:"text-white",children:'"主詞條"跟"副詞條"區塊中會自動帶入該部位詞條種類'})]})}),(0,a.jsx)(f.m_,{id:"MainAffixHint",place:"right-start",render:()=>(0,a.jsx)("div",{className:"flex flex-col max-w-[230px] ",children:(0,a.jsx)("span",{className:"text-white",children:"選擇遺器的主詞條"})})}),(0,a.jsx)(f.m_,{id:"SubAffixHint",place:"right-start",render:()=>(0,a.jsxs)("div",{className:"flex flex-col max-w-[230px] ",children:[(0,a.jsxs)("div",{className:"[&>span]:text-white flex flex-col",children:[(0,a.jsx)("span",{children:"根據遺器現有狀況"}),(0,a.jsx)("span",{children:"依序輸入詞條種類、詞條數值、強化次數"}),(0,a.jsx)("span",{className:"!text-yellow-500",children:"詞條數值不用輸入%"}),(0,a.jsx)("span",{className:"!text-yellow-500",children:"如果該詞條沒有被強化過，則強化次數打上0即可"})]}),(0,a.jsxs)("div",{className:"mt-2 [&>span]:text-white flex flex-col",children:[(0,a.jsx)("span",{children:"例如:今天有一個詞條為"}),(0,a.jsx)("span",{className:"!text-green-500",children:"暴擊傷害 13.4% 2"}),(0,a.jsx)("span",{children:"那麼只要key上"}),(0,a.jsx)("span",{className:"!text-green-500",children:"暴擊傷害 13.4 2"})]}),(0,a.jsxs)("div",{className:"mt-2 [&>span]:text-red-500 flex flex-col",children:[(0,a.jsx)("span",{children:"注意事項:"}),(0,a.jsx)("span",{children:"1.副詞條彼此間不能重複"}),(0,a.jsx)("span",{children:"2.主詞條跟副詞條不可重複"})]})]})}),(0,a.jsx)(f.m_,{id:"StandardHint",place:"right-start",render:()=>(0,a.jsxs)("div",{className:"flex flex-col max-w-[230px]",children:[(0,a.jsx)("span",{className:"text-white",children:"根據個人需求"}),(0,a.jsx)("span",{className:"text-yellow-400",children:"選擇不重複的詞條種類(包含主詞條)"}),(0,a.jsx)("span",{className:"!text-red-500",children:'"有效詞條"選擇最多保有6個。'})]})}),(0,a.jsx)(f.m_,{id:"HistoryHint",place:"right-bottom",render:()=>(0,a.jsxs)("div",{className:"flex flex-col [&>span]:text-white max-w-[250px] p-1",children:[(0,a.jsx)("span",{children:'"檢視"可以查看曾經查詢出來的資訊'}),(0,a.jsx)("span",{children:'"刪除"則會刪除該筆紀錄'}),(0,a.jsx)("span",{className:"!text-red-500",children:'"過往紀錄"最多只保留6筆'}),(0,a.jsx)("span",{className:"!text-yellow-500",children:"如果在已有6筆資料的情況再新增，則會從最舊的紀錄覆蓋掉"})]})}),(0,a.jsx)(f.m_,{id:"RelicDataHint",place:"right-start",render:()=>(0,a.jsxs)("div",{className:"flex flex-col [&>span]:text-white max-w-[250px] p-1",children:[(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-white",children:"下方會顯示出該遺器的"})}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"1.所屬套裝"}),(0,a.jsx)("li",{children:"2.主屬性"}),(0,a.jsx)("li",{children:"3.副屬性"}),(0,a.jsx)("li",{children:"4.副屬性數值"}),(0,a.jsx)("li",{children:"5.副屬性強化次數"})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("span",{className:"text-white",children:"此外下方有個重洗模擬按鈕，此功能將會帶入這個遺器的資訊進行重洗模擬"})})]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8,668,471,282,41,441,684,358],()=>t(322)),_N_E=e.O()}]);